<html>
<head>
  <title>snipMate补全的相关设置</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <link rel="Stylesheet" type="text/css" href="../../../style.css" />
  <!-- blog ico -->
  <link type="image/x-icon" rel="icon" href="../../../images/ruchee.ico" />
  <link type="image/x-icon" rel="shortcut icon" href="../../../images/ruchee.ico" />
  <!-- for SyntaxHighlighter core -->
  <script type="text/javascript" src="../../../scripts/shCore.js"></script>
  <link type="text/css" rel="stylesheet" href="../../../styles/shCore.css"/>
  <!-- for SyntaxHighlighter theme -->
  <link type="text/css" rel="stylesheet" href="../../../styles/shThemeMidnight.css"/>
  <!-- for SyntaxHighlighter syntax -->
  <script type="text/javascript" src="../../../scripts/shSyntax.js"></script>
  <!-- for SyntaxHighlighter execute -->
  <script type="text/javascript">
  SyntaxHighlighter.config.clipboardSwf = "../../../scripts/clipboard.swf";
  SyntaxHighlighter.all();
  </script>
  </head>
<body>
  <center style="font-family: 'Microsoft Yahei', sans-serif; font-size: 1.80em;
    font-weight: normal; color: #FF6600">Ruchee的荒草园子</center><br />
  <center>青春的记忆，童年的回忆，我们的努力</center>


<p>
<a href="../../../index.html">首页</a> - <a href="../index.html">Tools</a> - <a href="index.html">Vim</a>
<h2 id="toc_0.1">snipMate补全的相关设置</h2>
<hr />
<h3 id="toc_0.1.1">snipMate简介</h3>
</p>

<p>
<code>snipMate</code>是<code>Vim</code>的一个<code>tab</code>补全插件，支持任意编程语言，是<code>Vim</code>快速编码的辅助利器
</p>

<p>
安装方法这儿就不介绍了，很简单，下载其放置到<code>Vim</code>插件目录即可生效
</p>

<p>
掌握<code>snipMate</code>的回报比是相当高的，一旦彻底熟悉，编码那就真的是一种享受了，别人需要敲<code>100</code>下键盘的代码，你也许<code>50</code>次按键都不需要
</p>

<p>
这里有使用<code>snipMate</code>快速开发<code>GTK+</code>应用的演示：<a href="vim_gtk.html">点此进入演示地址</a>
<hr />
<h3 id="toc_0.1.2">snipMate设置</h3>
</p>

<p>
比如我想要添加<code>GTK+</code>的补全，但又不想被<code>C++</code>、<code>Obj-C</code>和<code>C#</code>继承，该怎么办呢？（因为默认<code>C++</code>、<code>Obj-C</code>和<code>C#</code>是继承<code>C</code>语言补全的）
</p>

<p>
要实现<code>C语言</code>里补全<code>GTK+</code>，又不能让其他语言访问到<code>GTK+</code>的补全，要做到这种效果，首先需要明白的一个概念就是，<code>snipMate</code>的补全继承是只能继承一层的，也就是说，<code>A</code>继承<code>B</code>，<code>B</code>继承<code>C</code>，但<code>A</code>是继承不到<code>C</code>的，它只能直接继承，无法跨越
</p>

<p>
另外需要注意的是，<code>snipMate</code>只支持单继承，也就是只能继承一个补全，无法继承多个
</p>

<p>
我这里就是利用<code>snipMate</code>只能继承一层的特点来完成补全屏蔽的设置
</p>

<p>
方法很简单，步骤如下：
</p>

<ol>
<li>
在<code>\vimfiles\snippets</code>目录（<code>Linux</code>下为<code>~/.vim/snippets</code>，下同）下新建<code>gtk.snippets</code>，并在该文件里面书写几个测试用的补全信息
</li>
<li>
打开<code>\vimfiles\plugin</code>目录下的<code>snipMate.vim</code>文件，找到函数<code>GetSnippets</code>（大概在<code>100</code>行左右）
</li>
<li>
在该函数里面照猫画虎，添加一个选择分支<code>elseif ft == 'c' call s:DefineSnips(a:dir, 'gtk', ft)</code>（这儿没有进行缩排）
</li>
</ol>

<p>
这样就<code>OK</code>了，试着新建一个<code>C语言</code>和<code>C++</code>源文件试试看，<code>GTK+</code>的补全将只在<code>.c</code>文件里有效，在<code>.cpp</code>中是无效的，这就实现了补全的屏蔽
</p>

<p>
可以如此设置的常见组合有以下几类
</p>

<ol>
<li>
<code>C++/C/GTK+</code>
</li>
<li>
<code>PHP/HTML</code>
</li>
<li>
<code>eruby/HTML</code>
</li>
<li>
<code>HTML/JavaScript</code>
</li>
</ol>

<p>
这里只是列出了一些常见的组合，具体说来，那就是你想怎么整就怎么整，只要能加速自己的编码速度就<code>OK</code>
</p>

<p>
下面是我<code>snipMate.vim</code>文件的关键部分：
</p>

<pre Vim>
<pre class="brush: vim">
let g:did_ft = {}
fun! GetSnippets(dir, filetypes)
	for ft in split(a:filetypes, '\.')
		if has_key(g:did_ft, ft) | continue | endif
		call s:DefineSnips(a:dir, ft, ft)
		if ft == 'cpp'
			call s:DefineSnips(a:dir, 'c', ft)
		elseif ft == 'c'
			call s:DefineSnips(a:dir, 'gtk', ft)
		elseif ft == 'ruby'
			call s:DefineSnips(a:dir, 'rails', ft)
		elseif ft == 'eruby'
			call s:DefineSnips(a:dir, 'html', ft)
		elseif ft == 'mkd'
			call s:DefineSnips(a:dir, 'html', ft)
		elseif ft == 'html'
			call s:DefineSnips(a:dir, 'javascript', ft)
		endif
		let g:did_ft[ft] = 1
	endfor
endf
</pre>
</pre>
<hr />
<h3 id="toc_0.1.3">我的补全文件</h3>

<p>
下面提供我<code>snippets</code>目录下全部补全文件的打包，你可以借鉴使用
</p>

<p>
下载地址：<a href="../../../download/snipMate_Ruchee.zip">http://www.ruchee.com/download/snipMate_Ruchee.zip</a>（<code>2013-02-13</code>更新）
</p>

<p>
<code>Github</code>地址：<a href="https://github.com/ruchee/vim/tree/master/.vim/snippets">https://github.com/ruchee/vim/tree/master/.vim/snippets</a>、<a href="https://github.com/ruchee/backup/tree/master/snippets">https://github.com/ruchee/backup/tree/master/snippets</a>
</p>

<p>
上述补全文件会不定期更新，具体根据我自己的学习方向和学习进度而定 <code>^-^</code>
<hr />
<red>date</red> : 2012-06-14、2012-06-15、2012-06-17、2012-06-27、2012-08-31、2012-09-02、2012-09-05、2013-02-13
<hr />
</p>

  <center  style="font-family: 'Microsoft Yahei'; font-size: small; font-weight: normal; color: #009933">
  Ruchee&nbsp;&copy;&nbsp;2011-2013&nbsp;www.ruchee.com<br>
  Generated by <a href="http://www.vim.org" target="_blank">Vim</a> &amp; <a href="http://code.google.com/p/vimwiki/" target="_blank">Vimwiki</a>
  </center>
  
  <!-- 量子统计代码 -->
  <script type="text/javascript" src="http://js.tongji.linezing.com/2785323/tongji.js"></script>

</body>
</html>
